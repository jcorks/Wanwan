<!DOCTYPE html>
<html lang="en-US">
<head></head><title>Test</title>
<meta charset="utf-8">
<link rel="icon" href="/favicon.ico" type="image/x-icon">
<link rel="stylesheet" href="./style/wanwan.css">

<body onresize="manager.onresize()">
    <div>
    <canvas id="canvas" width="400" height="400" style="background-color:rgb(64, 64, 64);"></canvas>
    <script type="text/javascript" src= "wanwan.min.js"></script>

    <div>
        <input type="text" id="nameEntry" 
            style="color: #DDD; background: rgb(100, 100, 100); 
                   border: none; width: 15%; outline: none;
                   font-family: monospace;
                   font-size: 15px;
                   float: left;
                   height:30px;
                   "
            value="Potato"></input>

        <input type="text" id="command" 
            style="color: #DDD; background: rgba(0, 0, 0, 1.0); 
                   border: none; width: 78%; outline: none;
                   font-family: monospace;
                   font-size: 15px;
                   float: left;
                   height:30px;

                   "
            onkeydown = "manager.input(event);"></input>
        </div>
    </div>

    <!-- Just manages the reszing of the canvas. Not necessary, but makes more 
         sense for a dedicated window of chat -->
    <script>
        var manager = {};

        manager.onresize = function() { 
            var canvas = document.getElementById("canvas"); 
            canvas.width  = window.innerWidth;
            canvas.height = (window.innerHeight - 70);
            document.getElementById("command").width = window.innerWidth*0.78;
            document.getElementById("nameEntry").width = window.innerWidth*0.15;
            Wanwan.Canvas.FullUpdate();
        }


        // send the mesage on enter
        manager.input = function(event) {
            if (event.keyCode == 13) {
                
                Wanwan.Name(textContent = document.getElementById("nameEntry").value); 
                textContent = document.getElementById("command").value; 
                document.getElementById("command").value = "";

                Wanwan.Post(textContent);
            }
        }

        manager.onresize();


        window.onload = function(){
            Wanwan.Init("canvas", "http://localhost/bin/core.wanwan");
            Wanwan.Canvas.Font = "wanwan_font_main"; // defined in wanwan.css
        }
    </script>
</body>
